<html>
<head>
	<title c="Certificate of ${subject.cn}"/>
	<link rel="stylesheet" type="text/css" href="stylesheet.css"/>
</head>
<body class="infopane">
	<h1>Certificate of <span c="${subject.cn}"/></h1>

	<p class="topinfo-bad" if="!${cert} and !${request}">
      This certificate is incomplete, you might consider removing it.</p>

    <p class="topinfo-ok" if="!${cert} and ${request} and !${request.submitted}">
	  Your request still needs to be <a href="action:viewrequest(1)">submitted</a> to the certificate authority.</p>

    <p class="topinfo-ok" if="!${cert} and ${request} and ${request.submitted} and !${request.processed}">
      Your request is currently awaiting approval (<a href="action:viewrequest(2)">more...</a>).</p>
	  
    <p class="topinfo-ok" if="!${cert} and ${request} and ${request.processed}">
      Your request has been accepted, you can now <a href="action:install(3)">retrieve your certificate</a>.</p>
	  
	<p class="topinfo-bad" if="${cert} and !${valid}">
	  This certificate is expired, you can no longer use it.</p>

    <!-- message from certificate check -->
	<p class="topinfo-message" if="${state.message}" c="${state.message}"/>

	<table summary="certificate details" cellpadding="3">
		<tr>
			<th class="name">Name</th>
			<td class="name">
				<span c="${subject.cn}"></span> <tt c="${subject.e}"></tt>
			</td>
		</tr>
		<tr>
			<th class="org">Organisation</th>
			<td class="org">
				<span c="${subject.o.html}"/><span if="${subject.ou}" c=", ${subject.ou.html}"/>
			</td>
		</tr>
		<tr if="${issuer}">
			<th class="issuer">Issuer</th>
			<td class="issuer" c="${issuer.cn}"></td>
		</tr>
		<tr if="${cert.sn}">
			<th class="serial">Serial</th>
			<td class="serial"><a href="https://ca.dutchgrid.nl/medium/query/?id=${cert.sn}" c="${cert.sn}"></a></td>
		</tr>
		<tr>
			<th class="validity">Valid</th>
			<td class="validity">
				<span if="${valid.notbefore}" c="from ${valid.notbefore}"/>
				<span if="${valid.notafter}" c="to ${valid.notafter}"/>
				<span if="${valid}" class="valid" title="certificate is valid and can be used">&#x2713;</span>
				<span if="!${valid}" class="invalid" title="certificate is expired or revoked">&#x2715;</span>
			</td>
		</tr>
		<!--
		<tr>
			<th class="vo">VOs</th>
			<td class="vo">
				<a href="https://voms.grid.sara.nl:8443/voms/pvier/">pvier</a>,
				<a href="https://voms.grid.sara.nl:8443/voms/ncf">ncf</a>,
				<i>pending:</i>
				<a href="https://voms.grid.sara.nl:8443/voms/vlemed" class="pending">vlemed</a>
			</td>
		</tr>
		-->

		<tr>
			<td colspan="2" class="showdetails">
				<a href="action:showdetails" class="shown-${(${view.showdetails})}">Details</a>
			</td>
		</tr>
		<tr class="details" if="${view.showdetails} and ${subject}">
			<th class="dn">DN</th>
			<td class="dn" c="${subject.x-dn-slash}"/>
		</tr>	
		<tr class="details" if="${view.showdetails} and ${modulus}">
			<th class="modulus">Modulus</th>
			<td class="modulus" c="${modulus.first20}..."/>
		</tr>
		<tr class="details" if="${view.showdetails} and ${subject.x-hash}">
			<th class="hash">Subject Hash</th>
			<td class="hash" c="${subject.x-hash}"/>
		</tr>
		<tr class="details" if="${view.showdetails} and ${usage}">
			<th class="usage">Usage</th>
			<td class="usage">
				<span if="${usage.any}" title="usable for anything">any,</span> 
				<span if="${usage.clientauth}" title="usable for client authentication like in a web browser">Client authentication,</span> 
				<span if="${usage.emailprotection}" title="usable for signing and encrypting emails">Email protection,</span>
			</td>
		</tr>
		<tr class="details" if="${view.showdetails} and ${path}">
			<th class="location">Location</th>
			<td class="location" c="${path}"/>
		</tr>
	</table>

</body>
</html>