<html>
<head>
	<title>Installation</title>
	<link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body id="wizard">

<div class="wizard-title" c="${wizard.title.html}"/>
<div class="wizard-contents" c="${wizard.contents.html}"/>

<!-- certificate still to be downloaded -->
<div class="wizard-page" if="!${cert}">
  <p if="!${request.processed}">Your request has not been processed yet.</p>
  <p if="${request.processed}">Your request has been processed, retrieving certificate...</p>
</div>

<!-- certificate present, install! -->
<div class="wizard-page" if="${cert}">

<div if="!${install.done}">
  <p>Congratulations, your certificate has been approved and
  was retrieved from the Certification Authority. To be able to access
  web-based services, you will finally want to
  install it into your webbrowser, <em c="${install.browser.desc}">your webbrowser</em>
  (<a href='action:changebrowser'>change browser</a>).</p>
  <p>Please follow these steps:</p>
</div>

<div if="${install.done}">
  <p>Your certificate has been installed in a webbrowser in the past. If you want to
  reinstall the certificate into your webbrowser,
  <em c="${install.browser.desc}">your webbrowser</em>
  (<a href='action:changebrowser'>change browser</a>), follow these steps:</p>
</div>


<form>

<ol if="${install.browser.certinst} and !${install.browser.certinst}!=manual">
	<li>Read these instructions, then press the <em>install</em> button below.<br/>
		You may need to enter your private key password again</li>
		
	<!--
	  -  Mozilla browsers
	  -->
	
	  <li if="${install.browser.certinst}==mozilla">
	    When an <em>Internet Security</em> dialog appears, choose <em>Allow</em>.</li>
	
	  <li if="${install.browser.certinst}==mozilla">
	    If you have set a master password, enter it in the dialog that pops up.</li>
	
	  <li if="${install.browser.certinst}==mozilla">
	    In the password dialog for the <em>certificate backup</em>, enter the
		password <tt id='passwd' c="${install.passwd}">tobaronetwothree</tt>
		Note that this a temporary password, and that it has been copied to
		your clipboard as well (use
		  <span if="${os.name[0:3]}!=Mac">Ctrl-V</span>
		  <span if="${os.name[0:3]}==Mac">Command-V</span>
		to paste).</li>

	
	<!--
	  -  Internet Explorer and other browsers using Windows keystore
	  -->
	
	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Win">
	    The <em>Certificate Import Wizard</em> will appear, press <em>Next</em> twice.</li>

	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Win">
	    In the password field, enter the password
	    <tt id='passwd' c="${install.passwd}">tobaronetwothree</tt>
		Note that this a temporary password, and that it has been copied to
		your clipboard as well (use Ctrl-V to paste).<br/>
		It is advised to <em>enable strong private key protection</em>
		for increased security.</li>
	
	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Win">
	    Press <em>Next</em> a couple of times, and <em>Finish</em>.</li>
	
	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Win">
	    If you enabled strong private key protection, confirm the keystore access
	    by pressing <em>Ok</em>.</li>


	<!-- 
	  -  Safari and other Mac OS keystore-aware browsers
	   -->
	   	 
	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Mac">
	    The <em>Add Certificates</em> dialog will appear, confirm that
		you want to import the certificate.</li>
		
	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Mac">
	    When the password of the PKCS#12 file to import is asked,
	    enter <tt id='passwd' c="${install.passwd}">tobaronetwothree</tt>
		Note that this a temporary password.</li>

	  <li if="${install.browser.certinst}==system and ${os.name[0:3]}==Mac">
	  	If you have set a password for your keychain, enter it in the next
		dialog.</li>
	    
	<!-- 
	  -  Browsers that import by opening the PKCS#12 file directly
	  -->
	  
	  <li if="${install.browser.certinst}==browser and ${install.browser}!=konqueror">
	  	<em c="${install.browser.desc}">your webbrowser</em> will open a new window or tab.</li>

	  <li if="${install.browser.certinst}==browser">
	    When the password of the PKCS#12 file to import is asked,
	    enter <tt id='passwd' c="${install.passwd}">tobaronetwothree</tt>
		Note that this a temporary password, and that it has been copied to
		your clipboard as well (use 
		  <span if="${os.name[0:3]}!=Mac">Ctrl-V</span>
		  <span if="${os.name[0:3]}==Mac">Command-V</span>
		to paste).</li>
		
	<li if="${install.browser.certinst}==browser and ${install.browser}==konqueror">
		In the konqueror window that appears, press the <em>Import All</em> button.</li>
	    
	 
	<!-- For all OSes -->
	 
	<li>A message dialog will indicate if the operation succeeded.</li>

</ol>
<div if="${install.browser.certinst}"><input type='button' href='action:install(silent,password=${install.passwd})' value='install'/></div>

<!-- 
  -  Browser unsupported, manual installation
  -->
 
<p if="!${install.browser.certinst} or ${install.browser.certinst}==manual">
  Automatic installation of your certificate is not supported for this webbrowser.
  You can do it manually by <a href="action:export">exporting</a> it to a PKCS#12
  file, and importing the resulting file into your webbrowser.
</p> 


</form>
</div>

</body>
</html>

